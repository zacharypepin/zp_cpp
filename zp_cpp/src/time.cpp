#include "zp_cpp/time.hpp"

#include <chrono>

// =========================================================================================================================================
// =========================================================================================================================================
// now: Returns the current system time in nanoseconds since epoch.
// =========================================================================================================================================
// =========================================================================================================================================
zp::ens zp::now()
{
    using namespace std::chrono;
    return (ens)duration_cast<nanoseconds>(system_clock::now().time_since_epoch()).count();
}

// =========================================================================================================================================
// =========================================================================================================================================
// calc_interp: Calculates interpolation factor [0.0, 1.0) for cyclic animation based on elapsed time modulo duration.
// =========================================================================================================================================
// =========================================================================================================================================
float zp::calc_interp(ens started, ens now, ens dur)
{
    ens elapsed  = now - started;
    ens in_cycle = elapsed % dur;
    return float(in_cycle) / float(dur);
}
